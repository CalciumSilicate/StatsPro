# StatsPro

[![MCDReforged](https://img.shields.io/badge/MCDReforged-2.x-blue)](https://github.com/Fallen-Breath/MCDReforged)
[![Python](https://img.shields.io/badge/Python-3.10+-green)](https://www.python.org/)
[![License](https://img.shields.io/badge/License-MIT-yellow)](LICENSE)

**StatsPro** æ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„ MCDReforged æ’ä»¶ï¼Œç”¨äºç®¡ç†å’Œå±•ç¤º Minecraft ç©å®¶ç»Ÿè®¡æ•°æ®ã€‚

## âœ¨ åŠŸèƒ½ç‰¹æ€§

- ğŸ“Š **è®¡åˆ†æ¿ç®¡ç†** - ä» stats æ–‡ä»¶åˆ›å»ºå’Œç®¡ç†è®¡åˆ†æ¿
- ğŸ” **æ•°æ®æŸ¥è¯¢** - æŸ¥è¯¢å•ä¸ªç©å®¶æˆ–å…¨æœæ’è¡Œæ¦œæ•°æ®
- â• **åŠ å’Œè®¡åˆ†æ¿** - åˆ›å»ºå¤šç‰©å“æ±‡æ€»çš„è®¡åˆ†æ¿ï¼ˆå¦‚å…¨å·¥å…·ä½¿ç”¨é‡ï¼‰
- ğŸ“ **æ•°æ®è®°å½•** - è®°å½•ç©å®¶æ•°æ®å¿«ç…§ï¼Œæ”¯æŒå·®å€¼åˆ†æ
- ğŸ”— **æ•°æ®åˆå¹¶** - åˆå¹¶å¤šä¸ªç©å®¶çš„ç»Ÿè®¡æ•°æ®

## ğŸ“¦ å®‰è£…

1. ç¡®ä¿å·²å®‰è£… [MCDReforged](https://github.com/Fallen-Breath/MCDReforged) 2.x
2. ä¸‹è½½ `stats_pro` ç›®å½•åˆ° `plugins/` æ–‡ä»¶å¤¹
3. é‡å¯ MCDR æˆ–ä½¿ç”¨ `!!MCDR reload plugin stats_pro`

## ğŸ® å‘½ä»¤åˆ—è¡¨

æ‰€æœ‰å‘½ä»¤ä»¥ `!!sp` å¼€å¤´ã€‚

### åŸºç¡€å‘½ä»¤

| å‘½ä»¤ | è¯´æ˜ |
|------|------|
| `!!sp help [é¡µç ]` | æŸ¥çœ‹å¸®åŠ©ä¿¡æ¯ |
| `!!sp save` | ä¿å­˜å¹¶é‡è½½æœåŠ¡å™¨ |
| `!!sp scoreboard <ç±»åˆ«> <ç‰©å“> [æ˜¾ç¤ºå]` | åˆ›å»ºè®¡åˆ†æ¿ |
| `!!sp set_display [è®¡åˆ†æ¿å]` | è®¾ç½®ä¾§è¾¹æ æ˜¾ç¤º |

### æŸ¥è¯¢å‘½ä»¤

| å‘½ä»¤ | è¯´æ˜ |
|------|------|
| `!!sp query <ç©å®¶> <ç±»åˆ«> <ç‰©å“>` | æŸ¥è¯¢ç©å®¶åˆ†æ•° |
| `!!sp query cls <ç©å®¶> <ç±»åˆ«> [æ•°é‡]` | æŸ¥è¯¢ç©å®¶æŸç±»åˆ«æ’è¡Œ |
| `!!sp query item <ç©å®¶> <ç‰©å“> [æ•°é‡]` | æŸ¥è¯¢ç©å®¶æŸç‰©å“æ’è¡Œ |

### æ’è¡Œæ¦œå‘½ä»¤

| å‘½ä»¤ | è¯´æ˜ |
|------|------|
| `!!sp rank <ç±»åˆ«> <ç‰©å“> [æ•°é‡]` | æŸ¥çœ‹æ’è¡Œæ¦œ |
| `!!sp rank cls <ç±»åˆ«> [æ•°é‡]` | æŸ¥çœ‹ç±»åˆ«æ’è¡Œ |
| `!!sp rank item <ç‰©å“> [æ•°é‡]` | æŸ¥çœ‹ç‰©å“æ’è¡Œ |

### åŠ å’Œè®¡åˆ†æ¿å‘½ä»¤

| å‘½ä»¤ | è¯´æ˜ |
|------|------|
| `!!sp sum make [é¢„è®¾å]` | åˆ›å»ºåŠ å’Œè®¡åˆ†æ¿ |
| `!!sp sum clear [é¢„è®¾å]` | æ¸…é™¤åŠ å’Œè®¡åˆ†æ¿ |
| `!!sp sum create <é¢„è®¾å> [å‰ç¼€]` | åˆ›å»ºæ–°é¢„è®¾ |
| `!!sp sum remove <é¢„è®¾å>` | åˆ é™¤é¢„è®¾ |
| `!!sp sum add <é¢„è®¾å> <ç±»åˆ«> <ç‰©å“>` | æ·»åŠ è®¡åˆ†é¡¹ |
| `!!sp sum del <é¢„è®¾å> <ç±»åˆ«> <ç‰©å“>` | åˆ é™¤è®¡åˆ†é¡¹ |
| `!!sp sum list` | åˆ—å‡ºæ‰€æœ‰é¢„è®¾ |
| `!!sp sum view [é¢„è®¾å]` | æŸ¥çœ‹é¢„è®¾è¯¦æƒ… |

### æ•°æ®ç”Ÿæˆå‘½ä»¤

| å‘½ä»¤ | è¯´æ˜ |
|------|------|
| `!!sp gen sum [å¤‡æ³¨]` | ç”Ÿæˆæ±‡æ€»æ–‡ä»¶ |
| `!!sp gen record [å¤‡æ³¨]` | è®°å½•å½“å‰æ•°æ® |
| `!!sp gen minus <æ¨¡å¼> <æ—¶é—´1> <æ—¶é—´2>` | ç”Ÿæˆå·®å€¼æ–‡ä»¶ |
| `!!sp gen list [æ¨¡å¼]` | åˆ—å‡ºç”Ÿæˆè®°å½• |
| `!!sp gen del <æ¨¡å¼> [æ—¶é—´]` | åˆ é™¤è®°å½• |

### åˆå¹¶å‘½ä»¤ (éœ€è¦ helper æƒé™)

| å‘½ä»¤ | è¯´æ˜ |
|------|------|
| `!!sp merge add <ç©å®¶>` | æ·»åŠ è¾“å…¥ç©å®¶ |
| `!!sp merge del <ç©å®¶/all>` | åˆ é™¤è¾“å…¥ç©å®¶ |
| `!!sp merge set <ç©å®¶>` | è®¾ç½®è¾“å‡ºç©å®¶ |
| `!!sp merge list` | åˆ—å‡ºåˆå¹¶é…ç½® |
| `!!sp merge exec` | æ‰§è¡Œåˆå¹¶ |

## ğŸ“ é¡¹ç›®ç»“æ„

```
stats_pro/
â”œâ”€â”€ __init__.py          # æ’ä»¶å…¥å£
â”œâ”€â”€ plugin.py            # æ’ä»¶ä¸»ç±»
â”œâ”€â”€ commands.py          # å‘½ä»¤å¤„ç†
â”œâ”€â”€ config.py            # é…ç½®ç®¡ç†
â”œâ”€â”€ constants.py         # å¸¸é‡å®šä¹‰
â”œâ”€â”€ models.py            # æ•°æ®æ¨¡å‹
â”œâ”€â”€ utils.py             # å·¥å…·å‡½æ•°
â”œâ”€â”€ stats_service.py     # ç»Ÿè®¡æ•°æ®æœåŠ¡
â”œâ”€â”€ scoreboard_service.py # è®¡åˆ†æ¿æœåŠ¡
â”œâ”€â”€ gen_service.py       # æ–‡ä»¶ç”ŸæˆæœåŠ¡
â””â”€â”€ merge_service.py     # åˆå¹¶æœåŠ¡
```

## âš™ï¸ é…ç½®æ–‡ä»¶

é…ç½®æ–‡ä»¶ä½äº `config/StatsPro/config.json`ï¼š

```json
{
    "presuppositions": {
        "default": {
            "name": "Â§cÂ§læŒ–æ˜æ€»æ¦œÂ§r",
            "prefix_dummy": "d",
            "prefix_true": "dt",
            "list": {
                "used": {
                    "diamond_pickaxe": "dp",
                    "diamond_axe": "da"
                }
            }
        }
    },
    "gen_list": {
        "sum": {},
        "record": {},
        "minus": {}
    },
    "merge_list": {
        "input": [],
        "output": ""
    }
}
```

## ğŸ”§ UUID æ˜ å°„

åœ¨ `config/StatsPro/uuid.json` ä¸­é…ç½®ç©å®¶åç§°ä¸ UUID çš„æ˜ å°„ï¼š

```json
{
    "PlayerName": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"
}
```

## ğŸ“ ç»Ÿè®¡ç±»åˆ«

æ”¯æŒçš„ç»Ÿè®¡ç±»åˆ« (`<ç±»åˆ«>` å‚æ•°)ï¼š

- `killed_by` - è¢«æ€æ­»æ¬¡æ•°
- `killed` - æ€æ­»ç”Ÿç‰©æ¬¡æ•°
- `custom` - è‡ªå®šä¹‰ç»Ÿè®¡
- `mined` - æŒ–æ˜æ–¹å—
- `used` - ä½¿ç”¨ç‰©å“
- `dropped` - ä¸¢å¼ƒç‰©å“
- `broken` - æŸåå·¥å…·
- `picked_up` - æ‹¾å–ç‰©å“
- `crafted` - åˆæˆç‰©å“

## ğŸ†• v2.0.0 æ›´æ–°æ—¥å¿—

### é‡å¤§é‡æ„
- â™»ï¸ å®Œå…¨é‡æ„ä»£ç æ¶æ„ï¼Œé‡‡ç”¨æ¨¡å—åŒ–è®¾è®¡
- ğŸ“ æ·»åŠ å®Œæ•´çš„ç±»å‹æ³¨è§£
- ğŸŒ³ ä½¿ç”¨ MCDR å‘½ä»¤æ ‘ API æ›¿ä»£å­—ç¬¦ä¸²è§£æ
- ğŸ—ï¸ åˆ†ç¦»æœåŠ¡å±‚ï¼šé…ç½®ã€ç»Ÿè®¡ã€è®¡åˆ†æ¿ã€ç”Ÿæˆã€åˆå¹¶

### Bug ä¿®å¤
- ğŸ› ä¿®å¤ `f.write(json.dumps(scores))` æœªå®šä¹‰å˜é‡é”™è¯¯
- ğŸ› ä¿®å¤ `json.load(stats)` åº”ä¸º `json.dumps` çš„é”™è¯¯
- ğŸ› ä¿®å¤ç±»å‹æ³¨è§£è¯­æ³•é”™è¯¯
- ğŸ› ä¿®å¤é‡å¤æ¡ä»¶åˆ¤æ–­é€»è¾‘
- ğŸ› ä¿®å¤ usercache æ°¸è¿œä¸è¯»å–çš„é—®é¢˜

### æ”¹è¿›
- âœ¨ ä½¿ç”¨ dataclass å®šä¹‰æ•°æ®æ¨¡å‹
- âœ¨ ä½¿ç”¨ Path æ›¿ä»£å­—ç¬¦ä¸²è·¯å¾„æ“ä½œ
- âœ¨ æ·»åŠ æ—¥å¿—ç³»ç»Ÿ
- âœ¨ æ”¹è¿›é”™è¯¯å¤„ç†

## ğŸ“„ è®¸å¯è¯

MIT License

## ğŸ‘¤ ä½œè€…

**CalciumSilicate**

---

*å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œæ¬¢è¿æäº¤ Issueï¼*
